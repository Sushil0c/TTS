<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Novel Player</title>
<style>
body {
  margin: 0;
  padding: 0;
  background-color: #f8f9fa; /* Light gray background */
  height: 100vh;
  overflow: hidden; /* Hide overflow to prevent scrolling */
}

.container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
}

.button-container {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: #343a40; /* Dark gray background for button container */
  padding: 10px 0;
}

button {
  margin: 0 10px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
  border: none;
  background-color: #007bff; /* Blue color for buttons */
  color: #ffffff; /* White text color for buttons */
  border-radius: 5px; /* Rounded corners for buttons */
}
</style>
</head>
<body>
<div class="container">
  <div id="novelsContainer"></div>
</div>
<div class="button-container">
  <button id="backwardBtn">Backward</button>
  <button id="playPauseBtn">Play</button>
  <button id="forwardBtn">Forward</button>
</div>

<script>
window.onload = function() {
  const novelsContainer = document.getElementById('novelsContainer');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const backwardBtn = document.getElementById('backwardBtn');
  const forwardBtn = document.getElementById('forwardBtn');
  let audioPlayer = null;

  // List of file names to fetch
  const files = ['karnali_blues.html', 'another_file.html', 'yet_another_file.html'];

  // Function to fetch and append content from each file
  files.forEach(file => {
    fetch(file)
      .then(response => response.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const novelTitle = doc.querySelector('.novel').textContent;
        const subItems = doc.querySelector('.sub-item').innerHTML;

        const novelDiv = document.createElement('div');
        novelDiv.classList.add('novel-container');
        novelDiv.innerHTML = `<p class="novel">${novelTitle}</p>${subItems}`;

        novelsContainer.appendChild(novelDiv);
      })
      .catch(error => console.error('Error fetching file:', error));
  });

  // Event listeners for play, pause, backward, and forward buttons
  playPauseBtn.addEventListener('click', function() {
    if (audioPlayer) {
      if (audioPlayer.paused) {
        audioPlayer.play();
        playPauseBtn.textContent = 'Pause';
      } else {
        audioPlayer.pause();
        playPauseBtn.textContent = 'Play';
      }
    }
  });

  backwardBtn.addEventListener('click', function() {
    if (audioPlayer) {
      audioPlayer.currentTime -= 10; // Move 10 seconds backward
    }
  });

  forwardBtn.addEventListener('click', function() {
    if (audioPlayer) {
      audioPlayer.currentTime += 10; // Move 10 seconds forward
    }
  });

  // Function to play audio when a novel is clicked
  novelsContainer.addEventListener('click', function(event) {
    if (event.target.classList.contains('novel')) {
      const audioSrc = event.target.getAttribute('data-src');
      if (audioPlayer) {
        audioPlayer.pause();
        audioPlayer.currentTime = 0;
      }
      audioPlayer = new Audio(audioSrc);
      audioPlayer.play();
      playPauseBtn.textContent = 'Pause';
    }
  });
};
</script>
</body>
</html>